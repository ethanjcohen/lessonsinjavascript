{"name":"Lessons In JavaScript","tagline":"This contains lessons discussing some of the complicated concepts in JavaScript, in an effort to transition Java developers to JavaScript.","body":"Lessons In JavaScript\r\n===================\r\n\r\n<h2>Lesson 1: Callback Basics</h2>\r\n\r\nA lot of Java developers have trouble grasping the asyncronous nature of JavaScript. In Java server-side code, to retrieve data from a web service you might do something like this:\r\n```java\r\nString xmlResponse = getDataFromWebService();\r\nSystem.out.println(xmlResponse);\r\n```\r\n\r\n<h3>The problem with asynchronous code in javaScript</h3>\r\nIf we implement our code this way in JavaScript, the browser will be hung while we are waiting for data to be returned from the web service.\r\n\r\nWhy? Because JavaScript executes on a single thread!\r\n\r\nTake this example in JavaScript:\r\n\r\n```javascript\r\nfunction updateView(text)\r\n{\r\n\t$('#output').text(text);\r\n}\r\n\r\nupdateView('Loading...');\r\nvar xmlData = getDataFromWebService();\r\nupdateView(xmlData);\r\n```\r\n\r\nWe want to show \"Loading...\" on the screen, and then replace that with the response from the web service. \r\n\r\n<b>But JavaScript runs in a SINGLE thread!</b>\r\n\r\nThat means that the browser uses only one thread to both execute JavaScript and render content on the screen - \"Loading...\" will not be rendered on the screen until the JavaScript has finished executing. If the web service takes 2 minutes to return, the user will be stuck looking at a blank screen for 2 minutes!\r\n\r\n<h3>The right way: use callbacks</h3>\r\n\r\nA callback is nothing more than a function that you pass to another function as an argument or parameter.\r\n\r\nTake a look at the above example re-written using a callback design pattern:\r\n\r\n```javascript\r\nfunction updateView(text)\r\n{\r\n\t$('#output').text(text);\r\n}\r\n\r\nupdateView('Loading...');\r\ngetDataFromWebService(function(xmlData) //create an anonymous function to pass in as a parameter\r\n{\r\n\tupdateView(xmlData);\r\n});\r\n```\r\n\r\nIn the above example, we assume that the function <b>getDataFromWebService</b> takes one parameter, a function. When <b>getDataFromWebService</b> has retrieved the web service data, it will execute the function, passing the xml data to it.\r\n\r\nThe above example was implemented using an anonymous function (a function that has no name), which you'll often see in JavaScript code.\r\n\r\nAnother way to write this example:\r\n\r\n```javascript\r\nfunction updateView(text)\r\n{\r\n\t$('#output').text(text);\r\n}\r\n\r\nupdateView('Loading...');\r\ngetDataFromWebService(updateView); //pass in the callback function as a parameter\r\n```\r\n\r\n<h3>One more time!</h3>\r\nLet's look at another example of using a callback.\r\n\r\nThe following function takes two numbers as parameters and returns the sum:\r\n```javascript\r\nfunction sum(numberOne, numberTwo)\r\n{\r\n\tvar value = numberOne + numberTwo;\r\n\treturn value;\r\n}\r\n\r\nvar value = sum(2, 5); //value is 7\r\n```\r\n\r\nYou can rewrite that function using the callback design pattern:\r\n```javascript\r\nfunction sum(numberOne, numberTwo, callbackFunction)\r\n{\r\n\tvar value = numberOne + numberTwo;\r\n\tcallbackFunction(value);\r\n}\r\n\r\nvar value = null;\r\n\r\nsum(2, 5, function(result)\r\n{\r\n\t//result is 7\r\n\tvalue = result;\r\n});\r\n```\r\n\r\nSee the difference? The two pieces of code above do exactly the same thing, but one uses a callback. Using a callback for this example is obviously not needed, but that's not the point.\r\n\r\n<h3>Callbacks are are great for event-driven design</h3>\r\n\r\njQuery uses a lot of callbacks to connect a function with an event. Take this simple example:\r\n```javascript\r\n$('button').on('click', function()\r\n{\r\n\talert(\"The button was clicked!\");\r\n});\r\n```\r\nIn the above example, every time the user clicks a button on the web page, a message will be shown. The first parameter to the <b>on</b> function is a string, the event name, and the second parameter is a callback function to execute when that event occurs.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}